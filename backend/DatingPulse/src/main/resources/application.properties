# DatingPulse Application Configuration

spring.application.name=DatingPulse

# Server Configuration
server.port=8080
server.servlet.context-path=/api

# Database Configuration (PostgreSQL)
spring.datasource.url=jdbc:postgresql://localhost:5432/datingpulse
spring.datasource.username=${DB_USERNAME:magnolia}
spring.datasource.password=${DB_PASSWORD:magnolia}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# JSON Configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC
spring.jackson.default-property-inclusion=NON_NULL

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB

# Photo Upload and Storage Configuration
app.s3.bucket-name=${S3_BUCKET_NAME:datingpulse-photos}
app.s3.region=${S3_REGION:us-east-1}
app.upload.max-file-size=5242880
app.upload.allowed-types=jpg,jpeg,png,gif,webp
app.upload.resize.max-width=1024
app.upload.resize.max-height=1024

# Content Moderation Configuration
app.moderation.auto-approve=${AUTO_APPROVE_PHOTOS:false}
app.moderation.blocked-keywords=nude,explicit,inappropriate,nsfw,adult,sex,porn

# Security Configuration
# JWT secret should be externalized in production
app.jwt.secret=${JWT_SECRET:mySecretKey}
app.jwt.expiration=86400000

# Validation Configuration
spring.jpa.properties.javax.persistence.validation.mode=auto

# Logging Configuration
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.magnolia.datingpulse=INFO

# Management and Monitoring
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
